(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{979:function(t,e,i){"use strict";i.r(e);var s=i(562),n=i.n(s);i(971);function a(t,e,i,s,n,a){const o=(t+e)/2,r=t*Math.PI*2,h=e*Math.PI*2,l=o*Math.PI*2;0===t&&1===e&&(i=!1),n=void 0!==n?n:1/3;const d=i?.1*Math.cos(l):0,c=i?.1*Math.sin(l):0,u=s?1.05:1;return{u:{min:-Math.PI,max:3*Math.PI,step:Math.PI/32},v:{min:0,max:2*Math.PI,step:Math.PI/20},x:function(t,e){return t<r?d+Math.cos(r)*(1+Math.cos(e)*n)*u:t>h?d+Math.cos(h)*(1+Math.cos(e)*n)*u:d+Math.cos(t)*(1+Math.cos(e)*n)*u},y:function(t,e){return t<r?c+Math.sin(r)*(1+Math.cos(e)*n)*u:t>h?c+Math.sin(h)*(1+Math.cos(e)*n)*u:c+Math.sin(t)*(1+Math.cos(e)*n)*u},z:function(t,e){return t<.5*-Math.PI?Math.sin(t):t>2.5*Math.PI?Math.sin(t)*a:Math.sin(e)>0?1*a:-1}}}var o={mixins:[{data:()=>({$_sidebarElm:null,$_resizeHandler:null}),mounted(){this.$_resizeHandler=function(t,e,i){let s,n,a,o,r;const h=function(){const l=+new Date-o;l<e&&l>0?s=setTimeout(h,e-l):(s=null,i||(r=t.apply(a,n),s||(a=n=null)))};return function(...n){a=this,o=+new Date;const l=i&&!s;return s||(s=setTimeout(h,e)),l&&(r=t.apply(a,n),a=n=null),r}}(()=>{this.chart&&this.chart.resize()},100),this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},beforeDestroy(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},activated(){this.$_initResizeEvent(),this.$_initSidebarResizeEvent()},deactivated(){this.$_destroyResizeEvent(),this.$_destroySidebarResizeEvent()},methods:{$_initResizeEvent(){window.addEventListener("resize",this.$_resizeHandler)},$_destroyResizeEvent(){window.removeEventListener("resize",this.$_resizeHandler)},$_sidebarResizeHandler(t){"width"===t.propertyName&&this.$_resizeHandler()},$_initSidebarResizeEvent(){this.$_sidebarElm=document.getElementsByClassName("sidebar-container")[0],this.$_sidebarElm&&this.$_sidebarElm.addEventListener("transitionend",this.$_sidebarResizeHandler)},$_destroySidebarResizeEvent(){this.$_sidebarElm&&this.$_sidebarElm.removeEventListener("transitionend",this.$_sidebarResizeHandler)}}}],name:"3DPie",filters:{},components:{},props:{className:{type:String,default:"chart"},width:{type:String,default:"100%"},height:{type:String,default:"350px"},chartData:{type:Array,default:()=>[]},autoResize:{type:Boolean,default:!0},legendShow:{type:Boolean,default:!0},contentLeft:{type:String,default:"-25%"},contentTop:{type:String,default:"0"},isCirclePie:{type:Boolean,default:!0},distance:{type:Number,default:150},activeHeight:{type:[Number,String],default:1},legendRight:{type:String,default:"0%"}},data:()=>({chart:null,option:null}),computed:{},watch:{chartData:{deep:!0,handler(t){this.setOptions(t)}}},mounted(){this.$nextTick(()=>{this.initChart()})},beforeDestroy(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart(){this.chart=n.a.init(this.$el),this.setOptions(this.chartData)},setOptions(t){console.log(t),this.option=this.getPie3D(t,2),this.chart.setOption(this.getPie3D(t,2))},getPie3D(t,e){console.log(t,"182------------");const i=[];let s=0,n=0,o=0;const r=[],h=void 0!==e?(1-e)/(1+e):1/3;for(let e=0;e<t.length;e++){s+=t[e].value;const n={name:void 0===t[e].name?"series"+e:t[e].name,type:"surface",parametric:!0,wireframe:{show:!1},pieData:t[e],pieStatus:{selected:!1,hovered:!1,k:h}};if(void 0!==t[e].itemStyle){const i={};void 0!==t[e].itemStyle.color&&(i.color=t[e].itemStyle.color),void 0!==t[e].itemStyle.opacity&&(i.opacity=t[e].itemStyle.opacity),n.itemStyle=i}i.push(n)}for(let t=0;t<i.length;t++)o=n+i[t].pieData.value,console.log(i[t]),i[t].pieData.startRatio=n/s,i[t].pieData.endRatio=o/s,i[t].parametricEquation=a(i[t].pieData.startRatio,i[t].pieData.endRatio,!1,!1,this.isCirclePie?h:1,this.isCirclePie?i[t].pieData.value/this.activeHeight:1),n=o,r.push(i[t].name);const l={tooltip:{formatter:t=>{if(console.log(t,"239-----------"),console.log(l),"mouseoutSeries"!==t.seriesName)return`${t.seriesName}<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:${t.color};"></span>${l.series.filter(e=>t.seriesName===e.name)[0].pieData.value}`}},legend:{data:r,show:this.legendShow,textStyle:{color:"#fff",fontSize:this.fontSize(.16),rich:{a:{color:"#2AD0FF",fontSize:this.fontSize(.16),width:this.fontSize(.5),align:"right"},c:{color:"#2AD0FF",fontSize:this.fontSize(.16),width:this.fontSize(.5),align:"right"},b:{width:this.isCirclePie?this.fontSize(1):this.fontSize(.5),fontSize:this.fontSize(.16)}}},formatter:t=>{const e=this.chartData.filter(e=>e.name===t);return console.log(e),this.isCirclePie?`{b|${t}}\r\r{a|${e[0].value+"台"}}`:`{b|${t}}\r\r{a|${e[0].value+"台"}}\r\r{c|${e[0].ratio}}`},itemGap:this.fontSize(.14),itemWidth:this.fontSize(.14),itemHeight:this.fontSize(.14),orient:"vertical",right:this.legendRight,top:"middle"},xAxis3D:{min:-1,max:1},yAxis3D:{min:-1,max:1},zAxis3D:{min:-1,max:1},grid3D:{show:!1,boxHeight:20,left:this.contentLeft,top:this.contentTop,viewControl:{distance:this.distance,alpha:30,beta:0,autoRotate:!0,zoomSensitivity:0,panSensitivity:0,rotateSensitivity:0},postEffect:{enable:!1,bloom:{enable:!0,bloomIntensity:.9},SSAO:{enable:!0,quality:"medium",radius:2,intensity:1},colorCorrection:{enable:!0}}},series:i};return l},fontSize(t){const e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(!e)return;return t*(e/1920*100)}}},r=i(23),h=Object(r.a)(o,(function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.className,style:{height:this.height,width:this.width}})}),[],!1,null,"1935dc58",null);e.default=h.exports}}]);